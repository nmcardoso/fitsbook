(this.webpackJsonpfitsbook=this.webpackJsonpfitsbook||[]).push([[0],{50:function(t,e,a){t.exports=a(94)},90:function(t,e){},93:function(t,e,a){},94:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(44),s=a.n(r),o=a(10),i=a(12);var l=function(){return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},c.a.createElement(o.b,{to:"/",className:"navbar-brand"},c.a.createElement("img",{src:"/img/data_science_icon.svg",width:"45",height:"45",alt:""}),c.a.createElement("span",{className:"ml-2"},"Fitsbook")),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},c.a.createElement("ul",{className:"navbar-nav ml-auto"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{exact:!0,to:"/",className:"nav-link",activeClassName:"active"},"Home")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{exact:!0,to:"/models",className:"nav-link",activeClassName:"active"},"Models")))))};var u=function(){return c.a.createElement("div",{className:"container mt-5"},c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h1",null,"Fitsbook"),c.a.createElement("p",null,"Homepage")))},h=a(15),m=a.n(h),d=a(2),p=a(3),b=a(7),f=a(6),v=a(8),g=function(t){function e(){return Object(d.a)(this,e),Object(b.a)(this,Object(f.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(p.a)(e,[{key:"getModels",value:function(){return this.get("/models")}},{key:"getModel",value:function(t){return this.get("/model/".concat(t))}},{key:"getHistory",value:function(t){return this.get("/history/".concat(t))}}]),e}(function(){function t(){Object(d.a)(this,t),this.API_ROOT="https://fitsbook.glitch.me/api"}return Object(p.a)(t,[{key:"get",value:function(t){return fetch("".concat(this.API_ROOT).concat(t),{method:"GET",mode:"cors",redirect:"follow"}).then((function(t){return t.json()}))}},{key:"post",value:function(t,e){var a={method:"POST",mode:"cors",redirect:"follow",body:e};return fetch("".concat(this.API_ROOT,"/").concat(t),a).then((function(t){return t.json()}))}},{key:"ping",value:function(){fetch("".concat(this.API_ROOT,"/ping")).then((function(t){return t.text()})).then((function(t){return!!t}))}}]),t}()),k=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(b.a)(this,Object(f.a)(e).call(this,t))).props=t,a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"formatDate",value:function(t){var e=new Date(t),a=("0"+e.getDate()).slice(-2),n=("0"+e.getMonth()).slice(-2),c=("0"+e.getFullYear()).slice(-2),r=("0"+e.getHours()).slice(-2),s=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return"".concat(a,"/").concat(n,"/").concat(c," - ").concat(r,":").concat(s,":").concat(o)}},{key:"elapsedTime",value:function(t,e){var a=Math.abs((e-t)/1e3),n=Math.floor(a/86400),c=Math.floor(a/3600)%24,r=Math.floor(a/60)%60,s=a%60,o=n>0?n+" days, ":"";return o+=c>0?c+"h, ":"",o+=r>0?r+"min, ":"",o+=s>0?s+"s":""}},{key:"render",value:function(){var t=this.props,e=t.id,a=t.model;return c.a.createElement(o.b,{to:"/stats/".concat(e),style:{color:"inherit",textDecoration:"none"}},c.a.createElement("div",{className:"card ".concat(this.props.className)},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"title"},a.model.name),c.a.createElement("small",{className:"d-block card-text mb-0 pb-0"},"Start: ",this.formatDate(a.training_start)," \u2022 End: ",this.formatDate(a.training_end)),c.a.createElement("small",{className:"d-block card-text"},"Elapsed Time: ",this.elapsedTime(a.training_start,a.training_end)))))}}]),e}(c.a.Component),y=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(b.a)(this,Object(f.a)(e).call(this,t))).state={cards:[]},a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"createTable",value:function(t){for(var e=[],a=0;a<Math.ceil(t.length/2);a++){for(var n=[],r=0;r<2&&2*a+r<t.length;r++)n.push(c.a.createElement("div",{key:"e-".concat(a,"-").concat(r),className:"col-md-6"},t[2*a+r]));e.push(c.a.createElement("div",{key:"e-".concat(a),className:"row"},n))}return e}},{key:"componentDidMount",value:function(){var t,e,a;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new g,n.next=3,m.a.awrap(t.getModels());case 3:e=n.sent,a=e.map((function(t){return c.a.createElement(k,{key:t.id,id:t.id,model:t,className:"mb-2"})})),this.setState({cards:a});case 6:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){return c.a.createElement("div",{className:"container mt-5"},this.createTable(this.state.cards))}}]),e}(c.a.Component),E=a(49),O=a(47),j=a.n(O),N=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(b.a)(this,Object(f.a)(e).call(this,t))).chart=null,a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){var t=document.getElementById("react-chart");this.chartConfig={type:"line",data:{labels:[],datasets:[]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0}}]},aspectRatio:1.75,responsive:!0}},this.chartInstance=new j.a(t,this.chartConfig)}},{key:"componentDidUpdate",value:function(t,e){this.props.data&&(this.chartConfig.data.labels=this.props.data.labels,this.chartConfig.data.datasets=this.props.data.datasets,this.chartInstance.update())}},{key:"render",value:function(){return c.a.createElement("div",{style:{width:this.props.width,height:this.props.height}},c.a.createElement("canvas",{id:"react-chart"}))}}]),e}(c.a.Component),w=function(){function t(){Object(d.a)(this,t),this.colors=["rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(54, 162, 235)","rgb(201, 203, 207)"],this.datasets=[]}return Object(p.a)(t,[{key:"createDatasetArray",value:function(t){var e=this;return t.map((function(t,a){return{label:t,data:[],borderColor:e.colors[a],backgroundColor:e.colors[a],fill:!1,lineTension:0}}))}},{key:"parse",value:function(t){if(0===this.datasets.length){if(!(t.length>0))return;var e=Object.keys(t[0].metrics);this.datasets=this.createDatasetArray(e)}var a=t.reduce((function(t,e){return Object.keys(e.metrics).forEach((function(a){a in t?t[a].push(e.metrics[a]):t[a]=[e.metrics[a]]})),t}),{}),n=t.map((function(t){return t.epoch}));return this.datasets.forEach((function(t){t.label in a&&(t.data=a[t.label])})),{labels:n,datasets:this.datasets}}}]),t}(),C=a(48),x=a.n(C),M=function(t){function e(t){var a;return Object(d.a)(this,e),(a=Object(b.a)(this,Object(f.a)(e).call(this,t))).params={id:t.match.params.id},a.state={data:null},a.socket=null,a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"drawChart",value:function(){var t,e,a,n;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=new g,c.next=3,m.a.awrap(t.getHistory(this.params.id));case 3:e=c.sent,a=new w,n=a.parse(e),this.setState({data:n});case 7:case"end":return c.stop()}}),null,this)}},{key:"socketUpdate",value:function(t){var e=this.state.data;if(e){var a=Object.keys(t.metrics);e.datasets.forEach((function(e){a.includes(e.label)&&e.data.push(t.metrics[e.label])})),e.labels.push(t.epoch),this.setState({data:Object(E.a)({},e)})}else this.drawChart()}},{key:"componentDidMount",value:function(){var t=this;this.socket=x()("http://localhost:8000"),this.socket.on("history-".concat(this.params.id),(function(e){console.log("socket data",e),t.socketUpdate(e)})),this.drawChart()}},{key:"render",value:function(){return c.a.createElement("div",{className:"container mt-5"},c.a.createElement(N,{data:this.state.data}))}}]),e}(c.a.Component);var D=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(l,null),c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:u}),c.a.createElement(i.a,{path:"/models",component:y}),c.a.createElement(i.a,{path:"/stats/:id",component:M})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(93);s.a.render(c.a.createElement(o.a,{basename:"/"},c.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[50,1,2]]]);
//# sourceMappingURL=main.0783924e.chunk.js.map