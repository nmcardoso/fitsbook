(this.webpackJsonpfitsbook=this.webpackJsonpfitsbook||[]).push([[0],{101:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(51),o=a.n(s),i=a(7),c=a(13),l=a(1),u=a(2),m=a(4),d=a(3),p=(a(59),function(){function e(){return Object(l.a)(this,e),e.instance?e.instance:(this.token=localStorage.getItem("user_token"),this.expiration=localStorage.getItem("user_token_expitarion"),this.id=localStorage.getItem("user_id"),this.loginListener=function(){},this.logoutListener=function(){},e.instance=this,this)}return Object(u.a)(e,[{key:"getToken",value:function(){return this.token}},{key:"setToken",value:function(e){this.token=e,localStorage.setItem("user_token",e),this.loginListener()}},{key:"getTokenExpiration",value:function(){return this.expiration}},{key:"setTokenExpiration",value:function(e){this.expiration=e,localStorage.setItem("user_token_expiration",e)}},{key:"getUserId",value:function(){return this.id}},{key:"setUserId",value:function(e){this.id=e,localStorage.setItem("user_id",e)}},{key:"clearData",value:function(){this.id=null,this.expiration=null,this.token=null,localStorage.removeItem("user_id"),localStorage.removeItem("user_token"),localStorage.removeItem("user_token_expiration"),this.logoutListener()}},{key:"addLoginListener",value:function(e){this.loginListener=e}},{key:"addLogoutListener",value:function(e){this.logoutListener=e}}]),e}()),h=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(l.a)(this,a),n=t.call(this,e);var r=new p;return n.state={showLoginButton:!Boolean(r.getToken())},r.addLoginListener((function(){return n.setState({showLoginButton:!1})})),r.addLogoutListener((function(){return n.setState({showLoginButton:!0})})),n}return Object(u.a)(a,[{key:"render",value:function(){var e=function(){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{exact:!0,to:"/login",className:"nav-link",activeClassName:"active"},"Login"))},t=function(){return r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{exact:!0,to:"/logout",className:"nav-link",activeClassName:"active"},"Logout"))};return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(i.b,{to:"/",className:"navbar-brand"},r.a.createElement("img",{src:"/fitsbook/img/data_science_icon.svg",width:"45",height:"45",alt:""}),r.a.createElement("span",{className:"ml-2"},"Fitsbook")),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{exact:!0,to:"/",className:"nav-link",activeClassName:"active"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.c,{exact:!0,to:"/models",className:"nav-link",activeClassName:"active"},"Models")),this.state.showLoginButton?r.a.createElement(e,null):r.a.createElement(t,null))))}}]),a}(r.a.Component);h.showLoginButton=!1;var f=h,g=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"loadTooltips",value:function(){var e=this;Object.keys(this.refs).forEach((function(t){window.$(e.refs[t]).tooltip()}))}},{key:"componentDidMount",value:function(){this.loadTooltips()}},{key:"render",value:function(){var e="/fitsbook";return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"HomeRoute container mt-5"},r.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},r.a.createElement("img",{src:e+"/img/data_science_icon_square_black.svg",height:"65px",alt:""}),r.a.createElement("span",{className:"display-4 font-weight-bold ml-3"},"Fitsbook")),r.a.createElement("div",{className:"mt-5 pt-3 description d-flex"},r.a.createElement("span",{className:"text-center"},"Tool for generating real-time machine learning training statistics and storing model histories. Direct integration with Keras Framework.")),r.a.createElement("div",{className:"mt-5 pt-3"},r.a.createElement("h5",null,"Made With"),r.a.createElement("div",{className:"alert alert-secondary logos d-flex flex-row flex-wrap justify-content-around align-items-center mt-2 py-2"},r.a.createElement("a",{href:"https://reactjs.org/",ref:"0","data-toggle":"tooltip",title:"React"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_react.svg",alt:"React"})),r.a.createElement("a",{href:"https://getbootstrap.com/",ref:"1","data-toggle":"tooltip",title:"Bootstrap"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_bootstrap4.svg",alt:"Bootstrap"})),r.a.createElement("a",{href:"https://www.chartjs.org/",ref:"8","data-toggle":"tooltip",title:"Chartjs"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_chartjs.svg",alt:"Chartjs"})),r.a.createElement("a",{href:"https://www.sqlite.org/index.html",ref:"2","data-toggle":"tooltip",title:"SqLite"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_sqlite.svg",alt:"Sqlite"})),r.a.createElement("a",{href:"https://socket.io/",ref:"7","data-toggle":"tooltip",title:"Socket.io"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_socketio.svg",alt:"Socket.io"})),r.a.createElement("a",{href:"https://expressjs.com/",ref:"3","data-toggle":"tooltip",title:"Express"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_express.svg",alt:"Express"})),r.a.createElement("a",{href:"https://keras.io/",ref:"6","data-toggle":"tooltip",title:"Keras"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_keras.jpg",alt:"Keras"})))),r.a.createElement("div",{className:"mt-5"},r.a.createElement("h5",null,"Powered By"),r.a.createElement("div",{className:"alert alert-secondary logos d-flex flex-row flex-wrap justify-content-around align-items-center mt-2 py-2"},r.a.createElement("a",{href:"https://pages.github.com/",ref:"4","data-toggle":"tooltip",title:"Github Pages"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_ghpages.png",alt:"Github Pages"})),r.a.createElement("a",{href:"https://glitch.com/",ref:"5","data-toggle":"tooltip",title:"Glitch.me"},r.a.createElement("img",{className:"mx-3 my-2",src:e+"/img/logo_glitch.svg",alt:"Glitch.me"})))),r.a.createElement("div",{className:"mt-5"},r.a.createElement("h5",null,"Open Source"),r.a.createElement("div",{className:"alert alert-secondary repos d-flex flex-row flex-wrap justify-content-around align-items-center mt-2 py-2"},r.a.createElement("a",{className:"d-flex flex-row align-items-center my-2",href:"https://github.com/nmcardoso/fitsbook"},r.a.createElement("img",{className:"pr-2",width:"30px",height:"30px",src:e+"/img/logo_github.svg",alt:"Github"})," WebApp Repo"),r.a.createElement("a",{className:"d-flex flex-row align-items-center my-2",href:"https://github.com/nmcardoso/fitsbook-server"},r.a.createElement("img",{className:"pr-2",width:"30px",height:"30px",src:e+"/img/logo_github.svg",alt:"Github"})," API Repo"),r.a.createElement("a",{className:"d-flex flex-row align-items-center my-2",href:"https://github.com/nmcardoso/fitsbook-python"},r.a.createElement("img",{className:"pr-2",width:"30px",height:"30px",src:e+"/img/logo_github.svg",alt:"Github"})," Python Library Repo")))))}}]),a}(r.a.Component),v=a(5),b=a.n(v),E=a(8),y=a(22),k=a.n(y),w=a(14),x=function(){function e(){Object(l.a)(this,e),this.API_ROOT="https://fitsbook.glitch.me/api",this.SOCKET_URL="https://fitsbook.glitch.me"}return Object(u.a)(e,[{key:"_getAuthHeaders",value:function(){var e=new p;return{"X-Fitsbook-Token":e.getToken(),"X-Fitsbook-UID":e.getUserId()}}},{key:"get",value:function(e){var t={method:"GET",mode:"cors",redirect:"follow",headers:this._getAuthHeaders()};return fetch("".concat(this.API_ROOT).concat(e),t)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={method:"POST",mode:"cors",redirect:"follow",headers:Object(w.a)({"Content-Type":"application/json"},this._getAuthHeaders()),body:JSON.stringify(t)};return fetch("".concat(this.API_ROOT).concat(e),a)}},{key:"delete",value:function(e){var t={method:"DELETE",mode:"cors",redirect:"follow",headers:this._getAuthHeaders()};return fetch("".concat(this.API_ROOT).concat(e),t)}},{key:"ping",value:function(){fetch("".concat(this.API_ROOT,"/ping")).then((function(e){return e.text()})).then((function(e){return!!e}))}}]),e}(),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"getModels",value:function(){return this.get("/models").then((function(e){return e.json()}))}},{key:"getModelsList",value:function(){return this.get("/models/list").then((function(e){return e.json()}))}},{key:"getModel",value:function(e){return this.get("/model/".concat(e)).then((function(e){return e.json()}))}},{key:"getHistory",value:function(e){return this.get("/history/".concat(e)).then((function(e){return e.json()}))}},{key:"stopTraining",value:function(e){return this.post("/training/".concat(e,"/stop")).then((function(e){return e.status}))}},{key:"deleteModel",value:function(e){return this.delete("/model/".concat(e)).then((function(e){return e.status}))}},{key:"updateDescription",value:function(e,t){return this.post("/model/".concat(e,"/description"),t).then((function(e){return e.status}))}}]),a}(x),j=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",{className:"spinner-grow spinner-grow-sm text-success"}),r.a.createElement("span",{className:"text-success ml-1"},"Training"))}}]),a}(r.a.Component),O=function(){function e(){Object(l.a)(this,e)}return Object(u.a)(e,[{key:"formatDate",value:function(e){var t=new Date(e),a=("0"+t.getDate()).slice(-2),n=("0"+t.getMonth()).slice(-2),r=("0"+t.getFullYear()).slice(-2),s=("0"+t.getHours()).slice(-2),o=("0"+t.getMinutes()).slice(-2),i=("0"+t.getSeconds()).slice(-2);return"".concat(a,"/").concat(n,"/").concat(r," - ").concat(s,":").concat(o,":").concat(i)}},{key:"timeSince",value:function(e){var t=Math.floor((Date.now()-e)/1e3),a=Math.floor(t/31536e3);return a>=1?a+" years ago":(a=Math.floor(t/2592e3))>=1?a+" months ago":(a=Math.floor(t/86400))>=1?a+" days ago":(a=Math.floor(t/3600))>=1?a+" hours ago":(a=Math.floor(t/60))>=1?a+" minutes ago":Math.floor(t)+" seconds ago"}},{key:"elapsedTime",value:function(e,t){var a=Math.abs((t-e)/1e3),n=Math.floor(a/86400),r=Math.floor(a/3600)%24,s=Math.floor(a/60)%60,o=Math.round(a%60),i=n>0?n+" days, ":"";return i+=r>0?r+"h, ":"",i+=s>0?s+"min, ":"",i+=o>0?o+"s":""}}]),e}();a(97);function S(e){return e.show?r.a.createElement("div",{className:"d-inline"},r.a.createElement("span",{className:"text-muted font-weight-bold text-uppercase"}," Duration: "),e.duration):null}var _=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).props=e,n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.model,n=new O;return r.a.createElement("div",{className:"ModelCard"},r.a.createElement(i.b,{to:"/stats/".concat(t)},r.a.createElement("div",{className:"card ".concat(this.props.className)},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("h5",{className:"card-title"},a.name),!a.training_end&&r.a.createElement(j,null)),r.a.createElement("small",{className:"d-block card-text"},r.a.createElement("span",{className:"text-muted font-weight-bold text-uppercase"},"Started: "),n.timeSince(a.training_start)," \u2022",r.a.createElement(S,{show:a.training_end,duration:n.elapsedTime(a.training_start,a.training_end)}))))))}}]),a}(r.a.Component),C=(a(98),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={show:!1},n.intervalId=setInterval((function(){n.setState({show:!0})}),400),n}return Object(u.a)(a,[{key:"componentWillUnmount",value:function(){null!==this.intervalId&&clearInterval(this.intervalId)}},{key:"render",value:function(){return this.state.show&&r.a.createElement("div",{className:"spinner"})}}]),a}(r.a.Component)),M=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={cards:[],showSpinner:!0},n}return Object(u.a)(a,[{key:"createTable",value:function(e){for(var t=[],a=0;a<Math.ceil(e.length/2);a++){for(var n=[],s=0;s<2&&2*a+s<e.length;s++)n.push(r.a.createElement("div",{key:"e-".concat(a,"-").concat(s),className:"col-md-6"},e[2*a+s]));t.push(r.a.createElement("div",{key:"e-".concat(a),className:"row"},n))}return t}},{key:"loadModels",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N,e.next=3,t.getModelsList();case 3:a=e.sent,n=a.map((function(e){return r.a.createElement(_,{key:e.id,id:e.id,model:e,className:"mb-2"})})),this.setState({cards:n,showSpinner:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadModels();case 2:this.socket=k()((new N).SOCKET_URL),this.socket.on("models",(function(e){"new"===e&&t.loadModels()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return this.state.showSpinner?r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"container flex-grow-1 d-flex align-items-center justify-content-center",style:{marginTop:"-42px"}},r.a.createElement(C,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"container mt-5"},this.createTable(this.state.cards)))}}]),a}(r.a.Component),T=a(31),L=a.n(T),D=(a(101),a(102),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).chart=null,n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementById("react-chart");this.chartConfig={type:"line",data:{labels:[],datasets:[]},options:{title:{display:!0,text:"Metrics per Epoch"},scales:{yAxes:[{ticks:{beginAtZero:!1,fontColor:"#333"},scaleLabel:{display:!1,labelString:"Metric"}}],xAxes:[{ticks:{fontColor:"#333"},scaleLabel:{display:!0,labelString:"Epoch"}}]},elements:{point:{radius:1,hoverRadius:4,hitRadius:5}},tooltips:{intersect:!1,mode:"index",axis:"x",position:"nearest"},aspectRatio:1.75,responsive:!0,maintainAspectRatio:!1,plugins:{zoom:{pan:{enabled:!0,mode:"x",rangeMin:{x:0},rangeMax:{x:null},speed:10},zoom:{enabled:!0,drag:!1,mode:"x",rangeMin:{x:0},rangeMax:{x:null},speed:20,sensitivity:.05}}}}},this.chartInstance=new L.a(t,this.chartConfig),t.addEventListener("dblclick",(function(){return e.chartInstance.resetZoom()}))}},{key:"componentDidUpdate",value:function(e,t){this.props.data&&(this.chartConfig.data.labels=this.props.data.labels,this.chartConfig.data.datasets=this.props.data.datasets,this.chartInstance.update())}},{key:"render",value:function(){return r.a.createElement("div",{className:"ChartWrapper"},r.a.createElement("canvas",{id:"react-chart"}))}}]),a}(r.a.Component)),I=function(){function e(){Object(l.a)(this,e),this.colors=["rgb(75, 192, 192)","rgb(255, 99, 132)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(54, 162, 235)","rgb(201, 203, 207)"],this.datasets=[]}return Object(u.a)(e,[{key:"createDatasetArray",value:function(e){var t=this;return e.map((function(e,a){return{label:e,data:[],borderColor:t.colors[a],backgroundColor:t.colors[a],fill:!1,lineTension:0}}))}},{key:"parse",value:function(e){if(0===this.datasets.length){if(!(e.length>0))return;var t=Object.keys(e[0].metrics);this.datasets=this.createDatasetArray(t)}var a=e.reduce((function(e,t){return Object.keys(t.metrics).forEach((function(a){a in e?e[a].push(t.metrics[a]):e[a]=[t.metrics[a]]})),e}),{}),n=e.map((function(e){return e.epoch+1}));return this.datasets.forEach((function(e){e.label in a&&(e.data=a[e.label])})),{labels:n,datasets:this.datasets}}}]),e}(),R=(a(104),a(16)),A=a.n(R),U=a(17);var P=function(){window.confirm("Unauthorized Action. Redirect to Login Page?")&&(window.location="/#/login")},H=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={redirect:!1},n}return Object(u.a)(a,[{key:"deleteModelHandler",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this model?")){e.next=2;break}return e.abrupt("return");case 2:return t=new N,e.next=5,t.deleteModel(this.props.model.id);case 5:200===e.sent?this.setState({redirect:!0}):P();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editModelDescHandler",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=window.prompt("New description",this.props.model.description))){e.next=14;break}return a=new N,e.next=5,a.updateDescription(this.props.model.id,{description:t});case 5:if(200!==e.sent){e.next=13;break}return e.next=9,a.getModel(this.props.model.id);case 9:n=e.sent,this.props.updateParent({model:n}),e.next=14;break;case 13:P();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.redirect?r.a.createElement(c.a,{to:"/models",push:!0}):this.props.model.id?r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{className:"btn",id:"dropdownMenuButton","data-toggle":"dropdown"},r.a.createElement(A.a,{path:U.c,size:1})),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"dropdownMenuButton"},r.a.createElement("button",{className:"dropdown-item d-inline-flex align-items-center pl-2",onClick:function(){return e.editModelDescHandler()}},r.a.createElement("span",{className:"pr-1 align-middle"},r.a.createElement(A.a,{path:U.e,size:.7,className:"d-block"}))," ",r.a.createElement("span",null,"Edit description")),r.a.createElement("button",{className:"dropdown-item d-inline-flex align-items-center pl-2",onClick:function(){return e.deleteModelHandler()}},r.a.createElement("span",{className:"pr-1"},r.a.createElement(A.a,{path:U.b,size:.7,className:"d-block"}))," ",r.a.createElement("span",null,"Delete this model")))):null}}]),a}(r.a.Component),z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={model:e.model},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){t.model!==this.props.model&&this.setState({model:this.props.model})}},{key:"createTable",value:function(e,t){if(e){var a=Object.keys(e).map((function(a,n){return e[a]?r.a.createElement("tr",{key:t+"-"+n},r.a.createElement("td",null,a),r.a.createElement("td",null,e[a])):null}));return r.a.createElement("table",{className:"table table-sm table-borderless table-responsive mb-0"},r.a.createElement("tbody",null,a))}}},{key:"drawLayers",value:function(e,t){var a=this,n=e.map((function(e,n){return r.a.createElement("div",{className:"mt-2 px-1",key:"".concat(t,"-").concat(n)},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("a",{className:"btn btn-block btn-outline-".concat(e.info.Trainable?"primary":"secondary"),"data-toggle":"collapse",href:"#collapse-".concat(t,"-").concat(n)},e.className)),r.a.createElement("div",{className:"collapse",id:"collapse-".concat(t,"-").concat(n)},r.a.createElement("div",{className:"card card-body p-1 mt-2"},a.createTable(e.info,"collapse-".concat(t,"-").concat(n,"-info")))))}));return r.a.createElement("div",null,n)}},{key:"parseModelData",value:function(e){var t=new O;return e&&Object.keys(e).length>0?{Name:e.model.name,Description:e.description,"Training Start":new Date(e.training_start).toLocaleString(),"Training End":e.training_end?new Date(e.training_end).toLocaleString():null,Duration:e.training_end?t.elapsedTime(e.training_start,e.training_end):null}:{}}},{key:"parseOptimizerData",value:function(e){if(e&&Object.keys(e).length>0){var t=this.parseConfig(e.optimizer.config);return Object(w.a)({Name:e.optimizer.name},t)}return{}}},{key:"parseLayersData",value:function(e){var t=this;return e&&Object.keys(e).length>0?e.model.config.layers.map((function(e){var a=t.parseConfig(e.config);return{className:e.class_name,info:Object(w.a)({"Input Shape":e.config.batch_input_shape?"(".concat(String(e.config.batch_input_shape),")"):null},a)}})):[]}},{key:"parseConfig",value:function(e){if(!e)return{};var t={lr:"Learning Rate",dtype:"Data Type"};return Object.keys(e).reduce((function(a,n){if("string"!==typeof e[n]&&"boolean"!==typeof e[n]&&"number"!==typeof e[n])return a;var r=n.replace("_"," ").replace(/(?:^|\s)\S/g,(function(e){return e.toUpperCase()}));return a[r=r.toLocaleLowerCase()in t?t[r.toLocaleLowerCase()]:r]=String(e[n]),a}),{})}},{key:"render",value:function(){var e=this,t=this.state.model;return r.a.createElement("div",{className:"sideModelInfo mt-2"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement("h5",{className:"mb-0"},"Model"),r.a.createElement(H,{model:t||{},updateParent:function(t){return e.setState(t)}})),this.createTable(this.parseModelData(t),"model"),r.a.createElement("h5",{className:"mt-3"},"Layers"),this.drawLayers(this.parseLayersData(t),"layers"),r.a.createElement("h5",{className:"mt-3"},"Optimizer"),this.createTable(this.parseOptimizerData(t),"optimizer"))}}]),a}(r.a.Component);function B(e){return r.a.createElement("div",{className:"alert alert-success ".concat(e.show?"":"d-none")},"Stop signal sent. The training will end at the end of the current epoch.")}var F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={showStopSignalNotification:!1},n}return Object(u.a)(a,[{key:"stopTrainingClickHandler",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N,e.next=3,t.stopTraining(this.props.id);case 3:200===e.sent?this.setState({showStopSignalNotification:!0}):P();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createModal",value:function(){var e=this;return r.a.createElement("div",{className:"modal fade",id:"training-panel-modal",tabIndex:"-1"},r.a.createElement("div",{className:"modal-dialog modal-dialog-centered"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"Confirm"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"})),r.a.createElement("div",{className:"modal-body"},"Do you really want to stop training?"),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary","data-dismiss":"modal",onClick:function(){return e.stopTrainingClickHandler()}},"Stop")))))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"alert alert-secondary"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},r.a.createElement(j,null),r.a.createElement("button",{className:"btn btn-danger","data-toggle":"modal","data-target":"#training-panel-modal",disabled:this.state.showStopSignalNotification},"Stop Training"))),r.a.createElement(B,{show:this.state.showStopSignalNotification}),this.createModal("btn btn-primary"))}}]),a}(r.a.Component),G=(a(105),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).params={id:e.match.params.id},n.state={data:null,showSpinner:!0},n.socket=null,n.model=null,n}return Object(u.a)(a,[{key:"drawChart",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new N,e.next=3,t.getHistory(this.params.id);case 3:a=e.sent,n=new I,r=n.parse(a),this.setState({data:r,showSpinner:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"socketUpdate",value:function(e){var t=this.state.data;if(t){var a=Object.keys(e.metrics);t.datasets.forEach((function(t){a.includes(t.label)&&t.data.push(e.metrics[t.label])})),t.labels.push(e.epoch),this.setState({data:Object(w.a)({},t),showSpinner:!1})}else this.drawChart()}},{key:"componentDidMount",value:function(){var e=Object(E.a)(b.a.mark((function e(){var t,a,n=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket=k()((new N).SOCKET_URL),this.socket.on("history-".concat(this.params.id),(function(e){console.log("socket data",e),n.socketUpdate(e)})),this.socket.on("training-".concat(this.params.id),function(){var e=Object(E.a)(b.a.mark((function e(t){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("end"!==t){e.next=6;break}return a=new N,e.next=4,a.getModel(n.params.id);case 4:r=e.sent,n.setState({model:r});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t=new N,e.next=6,t.getModel(this.params.id);case 6:a=e.sent,this.setState({model:a,showSpinner:!1}),this.drawChart();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){var e=this,t=function(t){if(t)return r.a.createElement(F,{id:e.params.id})};return this.state.showSpinner?r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"container-fluid flex-grow-1 d-flex align-items-center justify-content-center",style:{marginTop:"-42px"}},r.a.createElement(C,null))):r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"StatsRoute container-fluid flex-grow-1"},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-lg-9 mt-2 mt-lg-0 d-flex align-items-center justify-content-center"},r.a.createElement(D,{data:this.state.data})),r.a.createElement("div",{className:"sidebar col-lg-3 pr-lg-0 d-none d-lg-block d-xl-block"}," ",r.a.createElement("div",{className:"py-3"},t(this.state.model&&!this.state.model.training_end),r.a.createElement(z,{model:this.state.model}))),r.a.createElement("div",{className:"col-lg-3 d-lg-none d-xl-none py-3"}," ",t(this.state.model&&!this.state.model.training_end),r.a.createElement(z,{model:this.state.model})))))}}]),a}(r.a.Component)),W=a(23),K=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"auth",value:function(e,t){return this.post("/auth/token",{username:e,password:t}).then((function(e){return e.json()}))}}]),a}(x),q=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.type?"alert-".concat(this.props.type):"",t=this.props.className||"";return r.a.createElement("div",{className:"alert ".concat(e," ").concat(t)},this.props.message)}}]),a}(r.a.Component),J=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:"",loading:!1,alertbox:null,redirect:null},n}return Object(u.a)(a,[{key:"handleChange",value:function(e){this.setState(Object(W.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(){var e=Object(E.a)(b.a.mark((function e(t){var a,n,s,o,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!this.state.loading){e.next=3;break}return e.abrupt("return");case 3:if(a=this.state,n=a.username,s=a.password,o=new K,!n||!s){e.next=11;break}return this.setState({loading:!0}),e.next=9,o.auth(n,s);case 9:(i=e.sent).success?((c=new p).setUserId(i.userid),c.setToken(i.token),c.setTokenExpiration(i.valid_until),this.setState({redirect:"/"})):this.setState({alertbox:r.a.createElement(q,{type:"danger",message:i.message}),loading:!1});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(this.state.redirect)return r.a.createElement(c.a,{exact:!0,to:this.state.redirect});var t=this.state,a=t.username,n=t.password,s=t.alertbox,o=t.loading,i=function(){return r.a.createElement("button",{className:"btn btn-primary text-right",type:"submit",disabled:!0},r.a.createElement("span",{className:"spinner-border spinner-border-sm"})," Loading...")},l=function(){return r.a.createElement("button",{className:"btn btn-primary text-right",type:"submit"},"Submit")};return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},s,r.a.createElement("div",{className:"form-group mt-3"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(A.a,{path:U.a,size:.8}))),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Username",name:"username",value:a,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("div",{className:"input-group-text"},r.a.createElement(A.a,{path:U.d,size:.8}))),r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Password",name:"password",value:n,onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("div",{className:"text-right"},o?r.a.createElement(i,null):r.a.createElement(l,null)))}}]),a}(r.a.Component),X=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,null),r.a.createElement("div",{className:"container-fluid flex-grow-1 d-flex align-items-center justify-content-center",style:{marginTop:"-50px"}},r.a.createElement("div",{className:"card",style:{maxWidth:"550px"}},r.a.createElement("div",{className:"card-header",style:{backgroundImage:"url('".concat("/fitsbook","/img/login_card_header.jpg')"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundColor:"black"}},r.a.createElement("h5",{className:"text-white my-2"},"LOGIN")),r.a.createElement("div",{className:"card-body"},r.a.createElement(J,null)))))}}]),a}(r.a.Component),Z=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),n=t.call(this,e),(new p).clearData(),n}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(c.a,{exact:!0,to:"/"})}}]),a}(r.a.Component);var $=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(c.d,null,r.a.createElement(c.b,{exact:!0,path:"/",component:g}),r.a.createElement(c.b,{path:"/models",component:M}),r.a.createElement(c.b,{path:"/stats/:id",component:G}),r.a.createElement(c.b,{path:"/login",component:X}),r.a.createElement(c.b,{path:"/logout",component:Z})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);o.a.render(r.a.createElement(i.a,{basename:"/"},r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports=a(107)},59:function(e,t,a){},94:function(e,t){},97:function(e,t,a){},98:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.f3e724ce.chunk.js.map